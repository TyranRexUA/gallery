(this.webpackJsonpgallery=this.webpackJsonpgallery||[]).push([[0],{12:function(e,n,t){e.exports={AddCommentForm:"AddCommentForm_AddCommentForm__xbLrl",AddCommentForm__field:"AddCommentForm_AddCommentForm__field__2k-33",error:"AddCommentForm_error__1COKd"}},41:function(e,n,t){},46:function(e,n,t){},6:function(e,n,t){e.exports={ModuleLayer:"ModuleWindow_ModuleLayer__2n64X",ModuleWindow:"ModuleWindow_ModuleWindow__1fA-D",ModuleWindow__imgContainer:"ModuleWindow_ModuleWindow__imgContainer__1M0VC",ModuleWindow__img:"ModuleWindow_ModuleWindow__img__1I0nQ",ModuleWindow__comments:"ModuleWindow_ModuleWindow__comments__3wvMC",comment:"ModuleWindow_comment__2Krd2",comment__name:"ModuleWindow_comment__name__1ZbBY",comment__desc:"ModuleWindow_comment__desc__1Vtcr",preloader:"ModuleWindow_preloader__2na8e",ModuleWindow__closeBtn:"ModuleWindow_ModuleWindow__closeBtn__2Vjt6"}},65:function(e,n,t){"use strict";t.r(n);var i=t(1),a=t(0),c=t.n(a),o=t(15),r=t.n(o),d=(t(41),t(3)),s=(t(46),t(9)),m=t.n(s),u=t(13),l=t(4),_=t(31),j=t.n(_).a.create({baseURL:"https://tzfrontend.herokuapp.com/"}),b={getImages:function(){return j.get("images/").then((function(e){return e.data}))},getImage:function(e){return j.get("images/".concat(e,"/")).then((function(e){return e.data}))},getComments:function(e){return j.get("comments/".concat(e,"/")).then((function(e){return e.data}))},addComment:function(e){return j.post("comments/add/",e).then((function(e){return e.data.name}))}},O={image_id:null,imageSrc:"",isOpen:!1,comments:[],isLoading:!1,isFormSubmitting:!1},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_IMAGE_SRC":return Object(l.a)(Object(l.a)({},e),{},{imageSrc:n.payload});case"SET_IMAGE_COMMENTS":return Object(l.a)(Object(l.a)({},e),{},{comments:n.payload});case"CHANGE_IS_OPEN":return Object(l.a)(Object(l.a)({},e),{},{image_id:n.image_id,isOpen:n.isOpen,isLoading:!!n.isOpen||e.isLoading});case"CHANGE_IS_LOADING":return Object(l.a)(Object(l.a)({},e),{},{isLoading:n.isLoading});case"CHANGE_IS_FORM_SUBMITTING":return Object(l.a)(Object(l.a)({},e),{},{isFormSubmitting:n.isFormSubmitting});default:return e}},p=function(e){return{type:"SET_IMAGE_COMMENTS",payload:e}},f=function(e,n){return{type:"CHANGE_IS_OPEN",isOpen:e,image_id:n}},h=function(e){return{type:"CHANGE_IS_FORM_SUBMITTING",isFormSubmitting:e}},M=t(35),v=t(12),w=t.n(v),x=function(e){var n=e.image_id,t=Object(d.b)(),a=Object(d.c)((function(e){return e.imageModuleWindow.isFormSubmitting})),c=Object(M.a)({initialValues:{name:"",description:"",image_id:n},enableReinitialize:!0,onSubmit:function(e){var i;t((i=e,function(){var e=Object(u.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(h(!0)),e.next=3,b.addComment(i);case 3:return e.next=5,b.getComments(i.image_id);case 5:t=e.sent,n(p(t)),n(h(!1));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())),c.setValues({name:"",description:"",image_id:n})},validate:function(e){var n={};return e.name||(n.name="Required"),e.description||(n.description="Required"),n}});return Object(i.jsxs)("form",{className:w.a.AddCommentForm,onSubmit:c.handleSubmit,children:[Object(i.jsxs)("div",{className:w.a.AddCommentForm__field,children:[Object(i.jsx)("input",{type:"text",name:"name",value:c.values.name,onChange:c.handleChange,placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f"}),c.errors.name&&Object(i.jsx)("div",{className:w.a.error,children:c.errors.name})]}),Object(i.jsxs)("div",{className:w.a.AddCommentForm__field,children:[Object(i.jsx)("input",{type:"text",name:"description",value:c.values.description,onChange:c.handleChange,placeholder:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"}),c.errors.description&&Object(i.jsx)("div",{className:w.a.error,children:c.errors.description})]}),Object(i.jsx)("button",{disabled:a,type:"submit",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})]})},C=Object(a.memo)(x),S=t(6),N=t.n(S),E=function(){var e=Object(d.b)(),n=Object(d.c)((function(e){return e.imageModuleWindow.image_id})),t=Object(d.c)((function(e){return e.imageModuleWindow.imageSrc})),c=Object(d.c)((function(e){return e.imageModuleWindow.comments})),o=Object(d.c)((function(e){return e.imageModuleWindow.isLoading}));Object(a.useEffect)((function(){var t;n&&e((t=n,function(){var e=Object(u.a)(m.a.mark((function e(n){var i,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.getImage(t);case 2:return i=e.sent,n({type:"SET_IMAGE_SRC",payload:i.src}),e.next=6,b.getComments(t);case 6:a=e.sent,n(p(a)),n({type:"CHANGE_IS_LOADING",isLoading:!1});case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()))}),[n]);return Object(i.jsx)("div",{className:N.a.ModuleLayer,children:Object(i.jsx)("div",{className:N.a.ModuleWindow,children:o?Object(i.jsx)("div",{className:N.a.preloader}):Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)("div",{className:N.a.ModuleWindow__closeBtn,onClick:function(){document.body.classList.remove("lock"),e(f(!1,null))}}),Object(i.jsx)("div",{className:N.a.ModuleWindow__imgContainer,children:Object(i.jsx)("div",{className:N.a.ModuleWindow__img,children:Object(i.jsx)("img",{src:t,alt:""})})}),Object(i.jsx)("div",{className:N.a.ModuleWindow__comments,children:c.length>0&&c.map((function(e){return Object(i.jsxs)("div",{className:N.a.comment,children:[Object(i.jsx)("div",{className:N.a.comment__name,children:e.name}),Object(i.jsx)("div",{className:N.a.comment__desc,children:e.description})]},e.id)}))}),n&&Object(i.jsx)(C,{image_id:n})]})})})},W=Object(a.memo)(E),I={images:[],isLoading:!1},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case"SET_IMAGES":return Object(l.a)(Object(l.a)({},e),{},{images:n.payload});case"SET_IS_LOADING":return Object(l.a)(Object(l.a)({},e),{},{isLoading:n.isLoading});default:return e}},A=function(e){return{type:"SET_IS_LOADING",isLoading:e}},L=function(){var e=Object(d.b)(),n=Object(d.c)((function(e){return e.images.images})),t=Object(d.c)((function(e){return e.imageModuleWindow.isOpen})),c=Object(d.c)((function(e){return e.images.isLoading}));Object(a.useEffect)((function(){e(function(){var e=Object(u.a)(m.a.mark((function e(n){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(A(!0)),e.next=3,b.getImages();case 3:t=e.sent,n({type:"SET_IMAGES",payload:t}),n(A(!1));case 6:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())}),[]);return Object(i.jsxs)("div",{className:"App",children:[t&&Object(i.jsx)(W,{}),Object(i.jsx)("h1",{className:"title",children:"Test APP"}),c?Object(i.jsx)("div",{className:"preloader"}):Object(i.jsx)("div",{className:"main",children:n.map((function(n){return Object(i.jsx)("img",{src:n.src,alt:"",onClick:function(){return t=n.image_id,document.body.classList.add("lock"),void e(f(!0,t));var t}},n.image_id)}))}),Object(i.jsx)("div",{className:"footer",children:Object(i.jsx)("span",{children:"\xa9 2018-2019"})})]})},F=Object(a.memo)(L),T=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,66)).then((function(n){var t=n.getCLS,i=n.getFID,a=n.getFCP,c=n.getLCP,o=n.getTTFB;t(e),i(e),a(e),c(e),o(e)}))},G=t(10),k=t(34),R=Object(G.c)({images:y,imageModuleWindow:g}),B=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||G.d,D=Object(G.e)(R,B(Object(G.a)(k.a)));r.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(d.a,{store:D,children:Object(i.jsx)(F,{})})}),document.getElementById("root")),T()}},[[65,1,2]]]);
//# sourceMappingURL=main.f1f77fe1.chunk.js.map